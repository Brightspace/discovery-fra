<link rel="import" href="../../bower_components/polymer/polymer-element.html">

<script>
  'use strict';
  
  (() => {

    window.D2L = window.D2L || {};
    window.D2L.Discovery = window.D2L.Discovery || {};

    var discoveryBasePath = '/d2l/le/discovery/view';

    const RouteLocationsMixin = (superClass) => 
      class extends superClass {
        constructor() {
          super();
        }

        static get properties() {
          return {
            
          };
        }

        search(query, queryParams={}) {
          var queryParamsKeys = Object.keys(queryParams);
          var queryParamsUrl = '';
          if (queryParamsKeys.length) {
            queryParamsUrl = queryParamsKeys.map(key => `${key}=${queryParams[key]}`).join('&');
          }
          return `${discoveryBasePath}/search/${encodeURIComponent(query)}/${queryParamsUrl ? `?${queryParamsUrl}` : ''}`;
        }

        routeLocations() {
          return {
            navLink: () => `${discoveryBasePath}/`,
            home: () => `${discoveryBasePath}/home`,
            course: (courseId) => `${discoveryBasePath}/course/${encodeURIComponent(courseId)}`,
            manage: (courseId) => `${discoveryBasePath}/manage/${encodeURIComponent(courseId)}`,
            search: (query, queryParams={}) => this.search(query, queryParams),
            myList: () => this.search('', {'onMyList': true}),
          };
        }
      };

    window.D2L.Discovery.RouteLocationsMixin = Polymer.dedupingMixin(RouteLocationsMixin);
  })();
</script>